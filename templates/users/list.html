{% extends 'base.html' %}

{% block btn_contents %}
<div class="list__container">
    <div class="list__title">ğŸƒHistory List</div>
    <div class="list__user_info">í˜„ì¬ í”Œë ˆì´ì–´: {{ user.username }}</div>
    <div class="list__divide"></div>
    <div class="list__tool">
        {% for item in games_with_index %}
        <div class="list__game_info">
            <!-- ê²Œì„ ì¸ë±ìŠ¤ -->
            <div class="list__game_index">
                ê²Œì„ ë²ˆí˜¸: {{ item.index }}
            </div>

            <!-- ìƒëŒ€ë°© ì •ë³´ -->
            <div class="list__game_info_users">
                ìƒëŒ€ë°©: 
                {% if item.game.attacker == user %}
                    {{ item.game.defender.username }}
                {% else %}
                    {{ item.game.attacker.username }}
                {% endif %}
            </div>

            <!-- ê²Œì„ ìƒíƒœ -->
            <div class="list__game_info_status">
                ê²Œì„ ìƒíƒœ: {{ item.game.status }}, {{item.game.id}}
            </div>

            <!-- ê²Œì„ ê²°ê³¼ -->
            <div class="list__game_info_result">
                {% if item.game.status == "finished" %}
                    ë‚´ ê²°ê³¼: 
                    {% if item.game.winner == user %}
                        Win
                    {% elif item.game.winner == None %}
                        Draw
                    {% else %}
                        Lose
                    {% endif %}
                {% else %}
                    ê²°ê³¼ ëŒ€ê¸° ì¤‘
                {% endif %}
            </div>

            <!-- ë²„íŠ¼ -->
            <button type="submit" class="list__game_info_CA">Counter Attack</button>
            <a href="{% url 'games:user_game_data' game_id=item.game.id %}">
                <button type="submit" class="list__game_info_more">ê²Œì„ì •ë³´</button>
            </a>
        </div>
        {% empty %}
        <p>í”Œë ˆì´í•œ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
