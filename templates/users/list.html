{% extends 'base.html' %}

{% block btn_contents %}
<div class="list__container">
    <div class="list__title">ğŸƒHistory List</div>
    <div class="list__user_info">í˜„ì¬ í”Œë ˆì´ì–´: {{ user.username }}</div>
    <div class="list__divide"></div>
    <div class="list__tool">
        {% for item in games_with_index %}
        <div class="list__game_info">
            <!-- ê²Œì„ ì¸ë±ìŠ¤ -->
            <div class="list__game_index">
                {{ item.index }}
            </div>

            <!-- ìƒëŒ€ë°© ì •ë³´ -->
            <div class="list__game_info_users">
                {{ item.game.attacker}} VS {{item.game.defender}}
            </div>

            <div class="list__game_info_result">
                {% if item.game.status == "finished" %}
                    {% if item.game.winner%}
                        {% if item.game.winner.id == user.id %}
                            ğŸ† You Win! ğŸ†
                        {% else %}
                            ğŸ˜­ You Lose.. ğŸ˜­
                        {% endif %}
                    {% else %}
                        ğŸ¤ Draw ğŸ¤
                    {% endif %}
                {% else %}
                    {% if item.game.attacker == user %}
                        ì§„í–‰ ì¤‘..
                        <a href="{% url 'games:user_game_data' game_id=item.game.id %}">
                            <button type="submit" class="list__game_info_del">ê³µê²©ì·¨ì†Œ</button>
                        </a>
                    {% else %}
                        <a href="{% url 'games:user_game_data' game_id=item.game.id %}">
                        <button type="submit" class="list__game_info_CA">Counter Attack</button></a>
                    {% endif %}
                {% endif %}
            </div>
            <!-- ë²„íŠ¼ -->
            <a href="{% url 'games:user_game_data' game_id=item.game.id %}">
                <button type="submit" class="list__game_info_more">ê²Œì„ì •ë³´</button>
            </a>
        </div>
        {% empty %}
        <p>í”Œë ˆì´í•œ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}



